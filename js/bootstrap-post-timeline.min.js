jQuery(function(a){function b(a){for(var b=a.split("?")[1],c=b.split("&"),d={},e=0;e<c.length;e++){var f=c[e].split("=");d[f[0]]=f[1]}return d}function c(){var a=90,b=.8,c=jQuery(".year_head").length,d=jQuery("#timeline .item").length,e=(jQuery(window).height()-a-15-24*c)*b,f=e/d,g=!0;jQuery.when(jQuery.each(jQuery("[data-yearhead]"),function(){var a=jQuery(this).data().yearhead,b=jQuery(jQuery("[data-yearpost="+a+"]")).length;g||jQuery("[data-yeartarget="+a+"]").css("margin-top",b*f+"px"),g=!1})).done(function(){})}function d(a){jQuery("#timeline .timeline-year-list").affix("checkPosition"),jQuery("#timeline .timeline-year-list").data("bs.affix").options.offset={top:function(){return this.top=jQuery("#timeline").offset().top-a},bottom:function(){return this.bottom=jQuery(document).height()-(jQuery("#timeline").offset().top+jQuery("#timeline").height())+a}}}0!=jQuery("#timeline").length&&jQuery(window).load(function(){var e=90;c();var f;jQuery(window).on("resize",function(a){d(e),clearTimeout(f),f=setTimeout(function(){c()},400)}),jQuery("#timeline .timeline-year-list").affix({offset:{top:function(){return this.top=jQuery("#timeline").offset().top-e},bottom:function(){return this.bottom=jQuery(document).height()-(jQuery("#timeline").offset().top+jQuery("#timeline").height())+e}}}),a("#timeline .timeline-year-list").on("click","[data-yeartarget]",function(){var b=jQuery(this).data().yeartarget;jQuery("[data-yearposts="+b+"]").collapse("show"),a("html, body").animate({scrollTop:jQuery("[data-yearhead="+b+"]").offset().top-60},300,function(){})}),a("[data-yearposts]").on("shown.bs.collapse hidden.bs.collapse",function(){d(e)}),a("[data-yearposts]").on("show.bs.collapse",function(){var a=jQuery(this),b=a.data().yearposts;if(0===a.children('[data-type="timeline_post"]').length){var d={action:"getpost_by_year",from_year:b,get:bpt.get,start:0,security:bpt.security,paged:1,cur:1,max:0};jQuery.get(bpt.ajaxurl,d,function(b){jQuery('a.item-anchor[data-yearpost="'+d.from_year+'"]').slice(0,d.get).remove(),a.html(jQuery(b).filter("[data-yearposts]").html()),a.after(jQuery(b).filter("a.loadmore")),c()},"html")}else c()}),jQuery("#timeline").on("click","a.loadmore",function(a){a.preventDefault();var d=jQuery(this),e=b(d.attr("href")),f={action:"getpost_by_year",security:bpt.security,get:bpt.get,start:0,from_year:e.from_year,paged:e.paged,cur:e.cur,max:e.max};return jQuery.get(bpt.ajaxurl,f,function(a){jQuery('a.item-anchor[data-yearpost="'+f.from_year+'"]').slice(0,f.get).remove(),jQuery('[data-yearposts="'+f.from_year+'"]').last().after(jQuery(a)),c()}).done(function(){d.remove()}),!1})})});
//# sourceMappingURL=bootstrap-post-timeline.min.js.map